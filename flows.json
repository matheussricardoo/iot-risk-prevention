[
    {
        "id": "fire_detection_tab",
        "type": "tab",
        "label": "DetecÃ§Ã£o de Queimadas - Multi-Estado",
        "disabled": false,
        "info": "Sistema IoT de DetecÃ§Ã£o e PrevenÃ§Ã£o de Queimadas\n\n**Estados Monitorados:**\n- Amazonas (Manaus)\n- Mato Grosso do Sul (Campo Grande)\n- Minas Gerais (Belo Horizonte)\n\n**Fontes de Dados:**\n- ESP32 Wokwi (Simulado) via MQTT\n- API (Dados Reais) via Inject\n\n**SaÃ­das:**\n- InfluxDB Cloud\n- WhatsApp\n- Grafana Cloud (via InfluxDB)"
    },
    {
        "id": "comment_entrada",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "ENTRADA - Dados dos Sensores (ESP32 Wokwi + API)",
        "info": "Recebe dados de 2 fontes:\n- ESP32 Wokwi (simulado via MQTT)\n- API (dados reais via inject)",
        "x": 200,
        "y": 60,
        "wires": []
    },
    {
        "id": "mqtt_wokwi",
        "type": "mqtt in",
        "z": "fire_detection_tab",
        "name": "Wokwi (ESP32)",
        "topic": "iot/fire-detection/esp32-wokwi",
        "qos": "0",
        "datatype": "json",
        "broker": "mqtt_broker_hivemq",
        "inputs": 0,
        "x": 130,
        "y": 120,
        "wires": [["parse_json_wokwi"]]
    },
    {
        "id": "parse_json_wokwi",
        "type": "json",
        "z": "fire_detection_tab",
        "name": "Parse JSON",
        "property": "payload",
        "action": "obj",
        "x": 310,
        "y": 120,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "save_sensor_data",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Salvar Dados Sensor",
        "func": "// Salvar dados do sensor em contexto global para uso posterior\nglobal.set('sensorData', {\n    device: msg.payload.device || 'esp32-wokwi',\n    temperature: parseFloat(msg.payload.temperature) || 0,\n    humidity: parseFloat(msg.payload.humidity) || 0,\n    smoke: parseFloat(msg.payload.smoke) || 0,\n    alert: msg.payload.alert || false,\n    timestamp: new Date().toISOString()\n});\n\nnode.status({fill:\"green\", shape:\"dot\", text:`${msg.payload.device}: Temp=${msg.payload.temperature}Â°C`});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 510,
        "y": 120,
        "wires": [["trigger_states"]]
    },
    {
        "id": "trigger_states",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Distribuir para Estados",
        "func": "// Cria 3 mensagens, uma para cada estado\nconst states = [\n    { city: \"Manaus\", state: \"Amazonas\", abbr: \"AM\", country: \"Brazil\" },\n    { city: \"Campo Grande\", state: \"Mato Grosso do Sul\", abbr: \"MS\", country: \"Brazil\" },\n    { city: \"Belo Horizonte\", state: \"Minas Gerais\", abbr: \"MG\", country: \"Brazil\" }\n];\n\nconst messages = states.map(location => {\n    return {\n        payload: msg.payload,\n        location: location\n    };\n});\n\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 730,
        "y": 120,
        "wires": [["split_states"]]
    },
    {
        "id": "split_states",
        "type": "split",
        "z": "fire_detection_tab",
        "name": "Split Estados",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 920,
        "y": 120,
        "wires": [["route_to_weather"]]
    },
    {
        "id": "comment_clima",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "CLIMA - OpenWeather API (Dados Reais)",
        "info": "Coleta dados meteorolÃ³gicos reais de cada estado",
        "x": 210,
        "y": 200,
        "wires": []
    },
    {
        "id": "route_to_weather",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Rotear para Estado Correto",
        "func": "// Rotear para o nÃ³ OpenWeather correto baseado na localizaÃ§Ã£o\nconst city = msg.location.city;\n\nnode.status({fill:\"blue\", shape:\"ring\", text:`Roteando ${city}...`});\n\n// Retorna null para as saÃ­das que nÃ£o correspondem Ã  cidade\n// SaÃ­da 1: Manaus (AM)\n// SaÃ­da 2: Campo Grande (MS)\n// SaÃ­da 3: Belo Horizonte (MG)\n\nif (city === \"Manaus\") {\n    return [msg, null, null];\n} else if (city === \"Campo Grande\") {\n    return [null, msg, null];\n} else if (city === \"Belo Horizonte\") {\n    return [null, null, msg];\n}\n\n// Fallback: se nÃ£o reconhecer a cidade, nÃ£o envia para nenhum\nnode.error(`Cidade desconhecida: ${city}`);\nreturn [null, null, null];",
        "outputs": 3,
        "noerr": 0,
        "x": 180,
        "y": 280,
        "wires": [["weather_amazonas"], ["weather_ms"], ["weather_mg"]]
    },
    {
        "id": "weather_amazonas",
        "type": "openweathermap",
        "z": "fire_detection_tab",
        "name": "Amazonas (Manaus)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Manaus",
        "country": "Brazil",
        "language": "pt",
        "x": 460,
        "y": 240,
        "wires": [["analyze_fire_risk"]]
    },
    {
        "id": "weather_ms",
        "type": "openweathermap",
        "z": "fire_detection_tab",
        "name": "MS (Campo Grande)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Campo Grande",
        "country": "Brazil",
        "language": "pt",
        "x": 470,
        "y": 280,
        "wires": [["analyze_fire_risk"]]
    },
    {
        "id": "weather_mg",
        "type": "openweathermap",
        "z": "fire_detection_tab",
        "name": "MG (Belo Horizonte)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Belo Horizonte",
        "country": "Brazil",
        "language": "pt",
        "x": 480,
        "y": 320,
        "wires": [["analyze_fire_risk"]]
    },
    {
        "id": "comment_analise",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "ANÃLISE - Algoritmo de Risco de Queimada",
        "info": "Combina dados do sensor + clima para calcular risco",
        "x": 220,
        "y": 380,
        "wires": []
    },
    {
        "id": "analyze_fire_risk",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Calcular Risco de Queimada",
        "func": "// Recuperar dados do sensor\nconst sensor = global.get('sensorData') || {\n    temperature: 25,\n    humidity: 50,\n    smoke: 100,\n    device: 'esp32-wokwi'\n};\n\n// Extrair dados meteorolÃ³gicos\nconst weather = msg.payload;\nconst extTemp = parseFloat(weather.tempc) || 25;\nconst extHumidity = parseFloat(weather.humidity) || 50;\nconst windSpeed = parseFloat(weather.windspeed) || 0;\nconst conditions = weather.description || 'desconhecido';\n\n// âš ï¸ CRÃTICO: Preservar msg.location que vem do nÃ³ trigger_states\n// Se msg.location existe, usar direto (vem do split_states)\n// Caso contrÃ¡rio, tentar inferir do payload OpenWeather (fallback)\nlet location;\nif (msg.location && msg.location.abbr) {\n    // âœ… LocalizaÃ§Ã£o jÃ¡ estÃ¡ correta do flow anterior\n    location = msg.location;\n} else {\n    // âš ï¸ Fallback: tentar extrair do nome da cidade no OpenWeather\n    const cityName = weather.location || '';\n    if (cityName.includes('Manaus')) {\n        location = { city: 'Manaus', state: 'Amazonas', abbr: 'AM', country: 'Brazil' };\n    } else if (cityName.includes('Campo Grande')) {\n        location = { city: 'Campo Grande', state: 'Mato Grosso do Sul', abbr: 'MS', country: 'Brazil' };\n    } else if (cityName.includes('Belo Horizonte')) {\n        location = { city: 'Belo Horizonte', state: 'Minas Gerais', abbr: 'MG', country: 'Brazil' };\n    } else {\n        // âŒ Ãšltimo recurso: inferir da cidade do weather se possÃ­vel\n        node.warn(`âš ï¸ LocalizaÃ§Ã£o nÃ£o encontrada! weather.location=${cityName}`);\n        location = { city: cityName || 'Desconhecido', state: 'N/A', abbr: 'XX', country: 'Brazil' };\n    }\n}\n\n// ==========================================\n// ALGORITMO DE RISCO DE QUEIMADA\n// ==========================================\nlet riskScore = 0;\nlet riskLevel = 'BAIXO';\nlet riskColor = 'ğŸŸ¢';\n\n// 1. ANÃLISE DE FUMAÃ‡A (peso: 40%)\nif (sensor.smoke > 600) riskScore += 40;\nelse if (sensor.smoke > 400) riskScore += 30;\nelse if (sensor.smoke > 200) riskScore += 15;\n\n// 2. ANÃLISE DE TEMPERATURA INTERNA (peso: 25%)\nif (sensor.temperature > 50) riskScore += 25;\nelse if (sensor.temperature > 40) riskScore += 20;\nelse if (sensor.temperature > 35) riskScore += 10;\n\n// 3. ANÃLISE DE TEMPERATURA EXTERNA (peso: 15%)\nif (extTemp > 35) riskScore += 15;\nelse if (extTemp > 30) riskScore += 10;\nelse if (extTemp > 25) riskScore += 5;\n\n// 4. ANÃLISE DE UMIDADE (peso: 10%)\nconst avgHumidity = (sensor.humidity + extHumidity) / 2;\nif (avgHumidity < 30) riskScore += 10;\nelse if (avgHumidity < 50) riskScore += 5;\n\n// 5. ANÃLISE DE VENTO (peso: 10%)\nif (windSpeed > 40) riskScore += 10;\nelse if (windSpeed > 20) riskScore += 5;\n\n// Determinar nÃ­vel de risco\nif (riskScore >= 70) {\n    riskLevel = 'CRÃTICO';\n    riskColor = 'ğŸ”´';\n} else if (riskScore >= 50) {\n    riskLevel = 'ALTO';\n    riskColor = 'ğŸŸ ';\n} else if (riskScore >= 30) {\n    riskLevel = 'MÃ‰DIO';\n    riskColor = 'ğŸŸ¡';\n} else {\n    riskLevel = 'BAIXO';\n    riskColor = 'ğŸŸ¢';\n}\n\nconst timestamp = new Date();\n\n// Montar payload completo\nmsg.payload = {\n    sensor: {\n        device: sensor.device,\n        temperature: sensor.temperature,\n        humidity: sensor.humidity,\n        smoke: sensor.smoke\n    },\n    weather: {\n        temperature: extTemp,\n        humidity: extHumidity,\n        windSpeed: windSpeed,\n        conditions: conditions\n    },\n    location: location,\n    risk: {\n        score: riskScore,\n        level: riskLevel,\n        color: riskColor,\n        shouldAlert: riskScore >= 50\n    },\n    timestamp: timestamp.toISOString()\n};\n\nnode.status({\n    fill: riskScore >= 70 ? \"red\" : riskScore >= 50 ? \"yellow\" : \"green\",\n    shape: \"dot\",\n    text: `${sensor.device}/${location.abbr}: ${riskLevel} (${riskScore})`\n});\n\n// SaÃ­da 1: Sempre envia para InfluxDB\n// SaÃ­da 2: SÃ³ envia para WhatsApp se risco >= 50\nif (msg.payload.risk.shouldAlert) {\n    return [msg, msg];\n} else {\n    return [msg, null];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 740,
        "y": 440,
        "wires": [
            ["format_influxdb", "debug_analysis"],
            ["format_whatsapp"]
        ]
    },
    {
        "id": "comment_saidas",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "SAÃDAS - InfluxDB Cloud + WhatsApp + Grafana",
        "info": "Armazena dados na nuvem e envia alertas",
        "x": 220,
        "y": 520,
        "wires": []
    },
    {
        "id": "format_influxdb",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Formatar para InfluxDB 2.0",
        "func": "const data = msg.payload;\n\n// Sanitizar e converter todos os valores numÃ©ricos\nconst sensor_temp = Number(data.sensor.temperature) || 0;\nconst sensor_humidity = Number(data.sensor.humidity) || 0;\nconst sensor_smoke = Number(data.sensor.smoke) || 0;\nconst weather_temp = Number(data.weather.temperature) || 0;\nconst weather_humidity = Number(data.weather.humidity) || 0;\nconst weather_wind = Number(data.weather.windSpeed) || 0;\nconst risk_score = Number(data.risk.score) || 0;\n\n// Tags (strings)\nconst device = String(data.sensor.device || 'unknown');\nconst location = String(data.location.city || 'unknown');\nconst state = String(data.location.abbr || 'XX');\nconst region = String(data.location.state || 'unknown');\nconst risk_level = String(data.risk.level || 'N/A');\nconst alert = data.risk.shouldAlert ? 'true' : 'false';\n\n// Timestamp\nconst ts = new Date(data.timestamp);\n\n// FORMATO CORRETO para node-red-contrib-influxdb 0.7.0 com InfluxDB 2.0\n// O nÃ³ espera msg.payload como objeto flat com os fields\n// Tags devem estar em msg.payload tambÃ©m\n// measurement e timestamp vÃ£o em propriedades separadas\n\nmsg.payload = {\n    // FIELDS (valores numÃ©ricos)\n    sensor_temp: sensor_temp,\n    sensor_humidity: sensor_humidity,\n    sensor_smoke: sensor_smoke,\n    weather_temp: weather_temp,\n    weather_humidity: weather_humidity,\n    weather_wind: weather_wind,\n    risk_score: risk_score,\n    // TAGS (valores string)\n    device: device,\n    location: location,\n    state: state,\n    region: region,\n    risk_level: risk_level,\n    alert: alert\n};\n\n// Measurement name\nmsg.measurement = 'fire_detection';\n\n// Timestamp em nanosegundos\nmsg.timestamp = ts.getTime() * 1000000;\n\nnode.status({\n    fill: \"blue\",\n    shape: \"dot\",\n    text: `${device}/${state}: Score=${risk_score}`\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1020,
        "y": 440,
        "wires": [["influxdb_output", "debug_influx"]]
    },
    {
        "id": "influxdb_output",
        "type": "influxdb out",
        "z": "fire_detection_tab",
        "influxdb": "influxdb_cloud_config",
        "name": "â˜ï¸ InfluxDB Cloud",
        "measurement": "fire_detection",
        "precision": "ns",
        "retentionPolicy": "",
        "database": "",
        "precisionV18FluxV20": "ns",
        "retentionPolicyV18Flux": "",
        "org": "sua_organizacao",
        "bucket": "fire-detection",
        "x": 1290,
        "y": 440,
        "wires": []
    },
    {
        "id": "format_whatsapp",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Formatar Mensagem WhatsApp",
        "func": "const data = msg.payload;\nconst risk = data.risk;\nconst sensor = data.sensor;\nconst weather = data.weather;\nconst location = data.location;\n\nconst message = \n    `${risk.color} *ALERTA DE RISCO DE QUEIMADA: ${risk.level}* ${risk.color}\\n\\n` +\n    `ğŸ”¥ *PONTUAÃ‡ÃƒO DE RISCO: ${risk.score}/100*\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `ğŸ“ *LOCALIZAÃ‡ÃƒO*\\n` +\n    `ğŸ™ï¸ Cidade: ${location.city}\\n` +\n    `ğŸ—ºï¸ Estado: ${location.state} (${location.abbr})\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `ğŸ“Š *DADOS DO SENSOR IoT*\\n` +\n    `ğŸŒ¡ï¸ Temperatura: ${sensor.temperature.toFixed(1)}Â°C\\n` +\n    `ğŸ’§ Umidade: ${sensor.humidity.toFixed(1)}%\\n` +\n    `ğŸ’¨ FumaÃ§a: ${sensor.smoke.toFixed(0)} ppm\\n` +\n    `ğŸ¤– Dispositivo: ${sensor.device}\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `ğŸŒ¦ï¸ *CONDIÃ‡Ã•ES METEOROLÃ“GICAS REAIS*\\n` +\n    `ğŸŒ¡ï¸ Temperatura: ${weather.temperature.toFixed(1)}Â°C\\n` +\n    `ğŸ’§ Umidade: ${weather.humidity.toFixed(1)}%\\n` +\n    `ğŸ’¨ Vento: ${weather.windSpeed.toFixed(1)} km/h\\n` +\n    `â˜ï¸ CondiÃ§Ãµes: ${weather.conditions}\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `â° ${new Date().toLocaleString('pt-BR', {timeZone: 'America/Sao_Paulo'})}\\n\\n`;\n\nif (risk.level === 'CRÃTICO') {\n    msg.payload = message + `ğŸš¨ *AÃ‡ÃƒO IMEDIATA NECESSÃRIA!*\\nâš ï¸ Risco extremo de queimada detectado!\\nğŸš’ Acione os bombeiros: 193`;\n} else if (risk.level === 'ALTO') {\n    msg.payload = message + `âš ï¸ *AtenÃ§Ã£o redobrada necessÃ¡ria!*\\nğŸ“ Mantenha contato com autoridades locais`;\n} else {\n    msg.payload = message + `âš ï¸ *Monitoramento contÃ­nuo recomendado*`;\n}\n\nnode.status({\n    fill: \"green\",\n    shape: \"dot\",\n    text: `Enviando alerta ${location.abbr}`\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1040,
        "y": 520,
        "wires": [["whatsapp_output", "debug_whatsapp"]]
    },
    {
        "id": "whatsapp_output",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "fire_detection_tab",
        "name": "Enviar WhatsApp",
        "credtype": "account",
        "account": "",
        "text": "payload",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1290,
        "y": 520,
        "wires": [["debug_whatsapp_response"]]
    },
    {
        "id": "comment_testes",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "TESTES - SimulaÃ§Ã£o Manual (ESP32 + API)",
        "info": "BotÃµes para testar diferentes cenÃ¡rios com 2 devices",
        "x": 200,
        "y": 600,
        "wires": []
    },
    {
        "id": "inject_clear_cache",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "LIMPAR CACHE (antes de testar)",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 220,
        "y": 640,
        "wires": [["clear_cache_function"]]
    },
    {
        "id": "clear_cache_function",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Limpar Contexto Global",
        "func": "// Limpar dados antigos do sensor\nglobal.set('sensorData', null);\n\nnode.status({fill:\"green\", shape:\"ring\", text:\"Cache limpo!\"});\nnode.warn(\"âœ… Cache de sensorData limpo com sucesso!\");\n\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "x": 510,
        "y": 640,
        "wires": []
    },
    {
        "id": "comment_esp32_tests",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "ESP32 Wokwi (Simulado)",
        "info": "Testes com device esp32-wokwi",
        "x": 170,
        "y": 680,
        "wires": []
    },
    {
        "id": "inject_fire_esp32",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "ESP32: INCÃŠINDIO CRÃTICO",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"esp32-wokwi\",\"temperature\":55,\"humidity\":20,\"smoke\":750,\"alert\":true}",
        "payloadType": "json",
        "x": 180,
        "y": 720,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_high_esp32",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "ESP32: Risco ALTO",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"esp32-wokwi\",\"temperature\":42,\"humidity\":35,\"smoke\":450,\"alert\":true}",
        "payloadType": "json",
        "x": 170,
        "y": 760,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_normal_esp32",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "ESP32: CondiÃ§Ãµes NORMAIS",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"esp32-wokwi\",\"temperature\":28,\"humidity\":65,\"smoke\":120,\"alert\":false}",
        "payloadType": "json",
        "x": 200,
        "y": 800,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_auto_esp32",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "ESP32: Auto (5 min)",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "5",
        "topic": "",
        "payload": "{\"device\":\"esp32-wokwi\",\"temperature\":30,\"humidity\":55,\"smoke\":180,\"alert\":false}",
        "payloadType": "json",
        "x": 180,
        "y": 840,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "comment_api_tests",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "API Device (Dados Reais AutomÃ¡ticos)",
        "info": "Coleta dados reais da API a cada 30 segundos",
        "x": 200,
        "y": 900,
        "wires": []
    },
    {
        "id": "inject_auto_api",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "API: Auto a cada 1 minuto",
        "props": [{"p": "payload"}],
        "repeat": "60",
        "crontab": "",
        "once": true,
        "onceDelay": "3",
        "topic": "",
        "payload": "{\"device\":\"api\",\"temperature\":28,\"humidity\":60,\"smoke\":150,\"alert\":false}",
        "payloadType": "json",
        "x": 200,
        "y": 940,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "comment_api_manual_tests",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "API - Testes Manuais (SituaÃ§Ãµes CrÃ­ticas)",
        "info": "BotÃµes para simular situaÃ§Ãµes extremas",
        "x": 220,
        "y": 1000,
        "wires": []
    },
    {
        "id": "inject_fire_api",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "API: INCÃŠINDIO CRÃTICO",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"api\",\"temperature\":52,\"humidity\":18,\"smoke\":800,\"alert\":true}",
        "payloadType": "json",
        "x": 170,
        "y": 1040,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_high_api",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "API: Risco ALTO",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"api\",\"temperature\":45,\"humidity\":28,\"smoke\":520,\"alert\":true}",
        "payloadType": "json",
        "x": 160,
        "y": 1080,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_normal_api",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "API: CondiÃ§Ãµes NORMAIS",
        "props": [{"p": "payload"}],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "{\"device\":\"api\",\"temperature\":26,\"humidity\":70,\"smoke\":95,\"alert\":false}",
        "payloadType": "json",
        "x": 190,
        "y": 1120,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "comment_simulator",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "SIMULADOR AUTOMÃTICO - Dados para Dashboard (Grafana)",
        "info": "Gera dados realistas automaticamente para popular os dashboards",
        "x": 260,
        "y": 1180,
        "wires": []
    },
    {
        "id": "inject_simulator",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "SIMULADOR: Auto (30s) - PARA DASHBOARDS",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": "2",
        "topic": "",
        "x": 240,
        "y": 1220,
        "wires": [["function_simulator"]]
    },
    {
        "id": "function_simulator",
        "type": "function",
        "z": "fire_detection_tab",
        "name": "Gerador de Dados Realistas",
        "func": "// Simulador automÃ¡tico que gera dados variados para os dashboards\n// Alterna entre diferentes cenÃ¡rios de risco de forma realista\n\n// Obter contador do contexto (para variar os cenÃ¡rios)\nlet counter = context.get('counter') || 0;\ncounter++;\ncontext.set('counter', counter);\n\n// Definir cenÃ¡rio baseado no contador (ciclo de 12 execuÃ§Ãµes = 6 minutos)\nlet scenario = counter % 12;\n\nlet temperature, humidity, smoke, alert, device;\n\n// Alternar entre dispositivos\ndevice = (counter % 2 === 0) ? \"esp32-wokwi\" : \"api\";\n\n// CenÃ¡rios variados (ciclo completo a cada 6 minutos)\nif (scenario < 3) {\n    // CenÃ¡rio 1-3: BAIXO - CondiÃ§Ãµes normais (25%)\n    temperature = 22 + Math.random() * 8; // 22-30Â°C\n    humidity = 55 + Math.random() * 20;   // 55-75%\n    smoke = 80 + Math.random() * 100;     // 80-180 ppm\n    alert = false;\n} else if (scenario < 5) {\n    // CenÃ¡rio 4-5: MÃ‰DIO - CondiÃ§Ãµes de atenÃ§Ã£o (17%)\n    temperature = 30 + Math.random() * 8; // 30-38Â°C\n    humidity = 35 + Math.random() * 20;   // 35-55%\n    smoke = 200 + Math.random() * 150;    // 200-350 ppm\n    alert = false;\n} else if (scenario < 8) {\n    // CenÃ¡rio 6-8: ALTO - SituaÃ§Ã£o preocupante (25%)\n    temperature = 38 + Math.random() * 10; // 38-48Â°C\n    humidity = 20 + Math.random() * 20;    // 20-40%\n    smoke = 400 + Math.random() * 200;     // 400-600 ppm\n    alert = true;\n} else if (scenario < 10) {\n    // CenÃ¡rio 9-10: CRÃTICO - EmergÃªncia (17%)\n    temperature = 48 + Math.random() * 12; // 48-60Â°C\n    humidity = 10 + Math.random() * 15;    // 10-25%\n    smoke = 600 + Math.random() * 300;     // 600-900 ppm\n    alert = true;\n} else {\n    // CenÃ¡rio 11-12: Retorno ao BAIXO (16%)\n    temperature = 24 + Math.random() * 6; // 24-30Â°C\n    humidity = 60 + Math.random() * 15;   // 60-75%\n    smoke = 90 + Math.random() * 80;      // 90-170 ppm\n    alert = false;\n}\n\n// Arredondar valores\ntemperature = Math.round(temperature * 10) / 10;\nhumidity = Math.round(humidity * 10) / 10;\nsmoke = Math.round(smoke);\n\n// Adicionar pequenas variaÃ§Ãµes para realismo\nconst variation = (Math.random() - 0.5) * 2;\ntemperature += variation;\nhumidity += variation;\n\n// Garantir limites\ntemperature = Math.max(15, Math.min(65, temperature));\nhumidity = Math.max(10, Math.min(95, humidity));\nsmoke = Math.max(50, Math.min(1000, smoke));\n\n// Criar payload\nmsg.payload = {\n    device: device,\n    temperature: Math.round(temperature * 10) / 10,\n    humidity: Math.round(humidity * 10) / 10,\n    smoke: smoke,\n    alert: alert\n};\n\n// Status visual\nlet riskLevel = \"BAIXO\";\nif (smoke > 600 || temperature > 50) riskLevel = \"CRÃTICO\";\nelse if (smoke > 400 || temperature > 40) riskLevel = \"ALTO\";\nelse if (smoke > 200 || temperature > 32) riskLevel = \"MÃ‰DIO\";\n\nnode.status({\n    fill: riskLevel === \"CRÃTICO\" ? \"red\" : riskLevel === \"ALTO\" ? \"orange\" : riskLevel === \"MÃ‰DIO\" ? \"yellow\" : \"green\",\n    shape: \"dot\",\n    text: `${device}: ${riskLevel} | T:${temperature.toFixed(1)}Â°C S:${smoke}ppm`\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 540,
        "y": 1220,
        "wires": [["save_sensor_data"]]
    },
    {
        "id": "inject_simulator_manual",
        "type": "inject",
        "z": "fire_detection_tab",
        "name": "INICIAR SimulaÃ§Ã£o Manual",
        "props": [],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "x": 200,
        "y": 1260,
        "wires": [["function_simulator"]]
    },
    {
        "id": "comment_simulator_info",
        "type": "comment",
        "z": "fire_detection_tab",
        "name": "O simulador gera dados a cada 30s alternando entre cenÃ¡rios realistas",
        "info": "Ciclo completo:\n- 25% Risco BAIXO\n- 17% Risco MÃ‰DIO  \n- 25% Risco ALTO\n- 17% Risco CRÃTICO\n- 16% Retorno ao normal\n\nAlterna entre esp32-wokwi e api automaticamente",
        "x": 270,
        "y": 1300,
        "wires": []
    },
    {
        "id": "debug_analysis",
        "type": "debug",
        "z": "fire_detection_tab",
        "name": "Debug: AnÃ¡lise Completa",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1020,
        "y": 380,
        "wires": []
    },
    {
        "id": "debug_influx",
        "type": "debug",
        "z": "fire_detection_tab",
        "name": "Debug: InfluxDB Data",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "true",
        "targetType": "full",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 440,
        "wires": []
    },
    {
        "id": "debug_whatsapp",
        "type": "debug",
        "z": "fire_detection_tab",
        "name": "Debug: WhatsApp Msg",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1520,
        "y": 520,
        "wires": []
    },
    {
        "id": "debug_whatsapp_response",
        "type": "debug",
        "z": "fire_detection_tab",
        "name": "Debug: WhatsApp Response",
        "active": false,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1560,
        "y": 560,
        "wires": []
    },
    {
        "id": "api_only_tab",
        "type": "tab",
        "label": "API OpenWeather - Dados Reais (Separado)",
        "disabled": false,
        "info": "Fluxo exclusivo para dados REAIS da API OpenWeather\n\n**Estados Monitorados:**\n- Amazonas (Manaus)\n- Mato Grosso do Sul (Campo Grande)\n- Minas Gerais (Belo Horizonte)\n\n**Fluxo:**\n1. Timer dispara a cada 3 minutos\n2. Consulta OpenWeather API das 3 cidades\n3. Calcula risco baseado APENAS em dados meteorolÃ³gicos\n4. Salva no InfluxDB com device='api'\n5. Envia alertas WhatsApp se necessÃ¡rio"
    },
    {
        "id": "comment_api_trigger",
        "type": "comment",
        "z": "api_only_tab",
        "name": "TRIGGER - Coleta AutomÃ¡tica a cada 3 minutos",
        "info": "Dispara coleta de dados das 3 cidades",
        "x": 200,
        "y": 60,
        "wires": []
    },
    {
        "id": "inject_api_trigger",
        "type": "inject",
        "z": "api_only_tab",
        "name": "API: A cada 3 minutos",
        "props": [],
        "repeat": "180",
        "crontab": "",
        "once": true,
        "onceDelay": "5",
        "topic": "",
        "x": 170,
        "y": 120,
        "wires": [["create_api_requests"]]
    },
    {
        "id": "create_api_requests",
        "type": "function",
        "z": "api_only_tab",
        "name": "Criar RequisiÃ§Ãµes para 3 Cidades",
        "func": "// Criar 3 requisiÃ§Ãµes separadas para cada cidade\nconst cities = [\n    { city: \"Manaus\", state: \"Amazonas\", abbr: \"AM\", country: \"Brazil\" },\n    { city: \"Campo Grande\", state: \"Mato Grosso do Sul\", abbr: \"MS\", country: \"Brazil\" },\n    { city: \"Belo Horizonte\", state: \"Minas Gerais\", abbr: \"MG\", country: \"Brazil\" }\n];\n\nconst messages = cities.map(location => {\n    return {\n        payload: {},\n        location: location\n    };\n});\n\nnode.status({fill:\"blue\", shape:\"dot\", text:`Consultando ${cities.length} cidades...`});\n\nreturn [messages];",
        "outputs": 1,
        "noerr": 0,
        "x": 440,
        "y": 120,
        "wires": [["split_api_requests"]]
    },
    {
        "id": "split_api_requests",
        "type": "split",
        "z": "api_only_tab",
        "name": "Split",
        "splt": "\\n",
        "spltType": "str",
        "arraySplt": 1,
        "arraySpltType": "len",
        "stream": false,
        "addname": "",
        "x": 690,
        "y": 120,
        "wires": [["route_api_weather"]]
    },
    {
        "id": "comment_api_weather",
        "type": "comment",
        "z": "api_only_tab",
        "name": "OpenWeather API - 3 Cidades",
        "info": "Consultas reais Ã  API OpenWeather",
        "x": 180,
        "y": 200,
        "wires": []
    },
    {
        "id": "route_api_weather",
        "type": "function",
        "z": "api_only_tab",
        "name": "Rotear API",
        "func": "const city = msg.location.city;\n\nif (city === \"Manaus\") {\n    return [msg, null, null];\n} else if (city === \"Campo Grande\") {\n    return [null, msg, null];\n} else if (city === \"Belo Horizonte\") {\n    return [null, null, msg];\n}\n\nreturn [null, null, null];",
        "outputs": 3,
        "noerr": 0,
        "x": 130,
        "y": 280,
        "wires": [["api_weather_am"], ["api_weather_ms"], ["api_weather_mg"]]
    },
    {
        "id": "api_weather_am",
        "type": "openweathermap",
        "z": "api_only_tab",
        "name": "API: Manaus (AM)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Manaus",
        "country": "Brazil",
        "language": "pt",
        "x": 360,
        "y": 240,
        "wires": [["calculate_api_risk"]]
    },
    {
        "id": "api_weather_ms",
        "type": "openweathermap",
        "z": "api_only_tab",
        "name": "API: Campo Grande (MS)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Campo Grande",
        "country": "Brazil",
        "language": "pt",
        "x": 390,
        "y": 280,
        "wires": [["calculate_api_risk"]]
    },
    {
        "id": "api_weather_mg",
        "type": "openweathermap",
        "z": "api_only_tab",
        "name": "API: Belo Horizonte (MG)",
        "wtype": "current",
        "lon": "",
        "lat": "",
        "city": "Belo Horizonte",
        "country": "Brazil",
        "language": "pt",
        "x": 400,
        "y": 320,
        "wires": [["calculate_api_risk"]]
    },
    {
        "id": "comment_api_analysis",
        "type": "comment",
        "z": "api_only_tab",
        "name": "ANÃLISE - Risco baseado APENAS em dados meteorolÃ³gicos",
        "info": "Sem dados de sensores, apenas clima real",
        "x": 230,
        "y": 380,
        "wires": []
    },
    {
        "id": "calculate_api_risk",
        "type": "function",
        "z": "api_only_tab",
        "name": "Calcular Risco API (MeteorolÃ³gico)",
        "func": "// Algoritmo de risco baseado APENAS em dados meteorolÃ³gicos reais\n// NÃ£o usa dados de sensores (temperatura interna, fumaÃ§a)\n\nconst weather = msg.payload;\nconst location = msg.location;\n\n// Extrair dados meteorolÃ³gicos\nconst temp = parseFloat(weather.tempc) || 25;\nconst humidity = parseFloat(weather.humidity) || 50;\nconst windSpeed = parseFloat(weather.windspeed) || 0;\nconst conditions = weather.description || 'desconhecido';\n\n// ==========================================\n// ALGORITMO SIMPLIFICADO (SEM SENSORES)\n// ==========================================\nlet riskScore = 0;\n\n// 1. TEMPERATURA EXTERNA (50% do peso)\nif (temp > 38) riskScore += 50;\nelse if (temp > 34) riskScore += 40;\nelse if (temp > 30) riskScore += 25;\nelse if (temp > 26) riskScore += 10;\n\n// 2. UMIDADE (30% do peso)\nif (humidity < 20) riskScore += 30;\nelse if (humidity < 35) riskScore += 20;\nelse if (humidity < 50) riskScore += 10;\n\n// 3. VENTO (20% do peso)\nif (windSpeed > 50) riskScore += 20;\nelse if (windSpeed > 30) riskScore += 15;\nelse if (windSpeed > 15) riskScore += 8;\n\n// Determinar nÃ­vel\nlet riskLevel = 'BAIXO';\nif (riskScore >= 70) riskLevel = 'CRÃTICO';\nelse if (riskScore >= 50) riskLevel = 'ALTO';\nelse if (riskScore >= 30) riskLevel = 'MÃ‰DIO';\n\nconst timestamp = new Date();\n\n// Montar payload\nmsg.payload = {\n    sensor: {\n        device: 'api',\n        temperature: temp,  // Usar temp externa como \"sensor\"\n        humidity: humidity,\n        smoke: 0  // API nÃ£o tem sensor de fumaÃ§a\n    },\n    weather: {\n        temperature: temp,\n        humidity: humidity,\n        windSpeed: windSpeed,\n        conditions: conditions\n    },\n    location: location,\n    risk: {\n        score: riskScore,\n        level: riskLevel,\n        color: riskScore >= 70 ? 'ğŸ”´' : riskScore >= 50 ? 'ğŸŸ ' : riskScore >= 30 ? 'ğŸŸ¡' : 'ğŸŸ¢',\n        shouldAlert: riskScore >= 50\n    },\n    timestamp: timestamp.toISOString()\n};\n\nnode.status({\n    fill: riskScore >= 70 ? \"red\" : riskScore >= 50 ? \"yellow\" : \"green\",\n    shape: \"dot\",\n    text: `API/${location.abbr}: ${riskLevel} (${riskScore})`\n});\n\n// SaÃ­da 1: InfluxDB\n// SaÃ­da 2: WhatsApp (se alerta)\nif (msg.payload.risk.shouldAlert) {\n    return [msg, msg];\n} else {\n    return [msg, null];\n}",
        "outputs": 2,
        "noerr": 0,
        "x": 730,
        "y": 440,
        "wires": [
            ["format_api_influx", "debug_api"],
            ["format_api_whatsapp"]
        ]
    },
    {
        "id": "comment_api_output",
        "type": "comment",
        "z": "api_only_tab",
        "name": "SAÃDAS - InfluxDB + WhatsApp",
        "info": "Armazena com device='api'",
        "x": 170,
        "y": 520,
        "wires": []
    },
    {
        "id": "format_api_influx",
        "type": "function",
        "z": "api_only_tab",
        "name": "Formatar InfluxDB (API)",
        "func": "const data = msg.payload;\n\n// Valores numÃ©ricos\nconst sensor_temp = Number(data.weather.temperature) || 0;\nconst sensor_humidity = Number(data.weather.humidity) || 0;\nconst sensor_smoke = 0;  // API nÃ£o tem sensor de fumaÃ§a\nconst weather_temp = Number(data.weather.temperature) || 0;\nconst weather_humidity = Number(data.weather.humidity) || 0;\nconst weather_wind = Number(data.weather.windSpeed) || 0;\nconst risk_score = Number(data.risk.score) || 0;\n\n// Tags\nconst device = 'api';  // IMPORTANTE: marcar como 'api'\nconst location = String(data.location.city || 'unknown');\nconst state = String(data.location.abbr || 'XX');\nconst region = String(data.location.state || 'unknown');\nconst risk_level = String(data.risk.level || 'N/A');\nconst alert = data.risk.shouldAlert ? 'true' : 'false';\n\nconst ts = new Date(data.timestamp);\n\nmsg.payload = {\n    // FIELDS\n    sensor_temp: sensor_temp,\n    sensor_humidity: sensor_humidity,\n    sensor_smoke: sensor_smoke,\n    weather_temp: weather_temp,\n    weather_humidity: weather_humidity,\n    weather_wind: weather_wind,\n    risk_score: risk_score,\n    // TAGS\n    device: device,\n    location: location,\n    state: state,\n    region: region,\n    risk_level: risk_level,\n    alert: alert\n};\n\nmsg.measurement = 'fire_detection';\nmsg.timestamp = ts.getTime() * 1000000;\n\nnode.status({\n    fill: \"blue\",\n    shape: \"dot\",\n    text: `API/${state}: ${risk_score}`\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1000,
        "y": 440,
        "wires": [["influxdb_api_output"]]
    },
    {
        "id": "influxdb_api_output",
        "type": "influxdb out",
        "z": "api_only_tab",
        "influxdb": "influxdb_cloud_config",
        "name": "InfluxDB (API)",
        "measurement": "fire_detection",
        "precision": "ns",
        "retentionPolicy": "",
        "database": "",
        "precisionV18FluxV20": "ns",
        "retentionPolicyV18Flux": "",
        "org": "sua_organizacao",
        "bucket": "fire-detection",
        "x": 1240,
        "y": 440,
        "wires": []
    },
    {
        "id": "format_api_whatsapp",
        "type": "function",
        "z": "api_only_tab",
        "name": "Formatar WhatsApp (API)",
        "func": "const data = msg.payload;\nconst risk = data.risk;\nconst weather = data.weather;\nconst location = data.location;\n\nconst message = \n    `${risk.color} *ALERTA METEOROLÃ“GICO: ${risk.level}* ${risk.color}\\n\\n` +\n    `ğŸ”¥ *RISCO CALCULADO: ${risk.score}/100*\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `ğŸ“ *LOCALIZAÃ‡ÃƒO*\\n` +\n    `ğŸ™ï¸ Cidade: ${location.city}\\n` +\n    `ğŸ—ºï¸ Estado: ${location.state} (${location.abbr})\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `ğŸŒ¦ï¸ *CONDIÃ‡Ã•ES METEOROLÃ“GICAS REAIS*\\n` +\n    `ğŸŒ¡ï¸ Temperatura: ${weather.temperature.toFixed(1)}Â°C\\n` +\n    `ğŸ’§ Umidade: ${weather.humidity.toFixed(1)}%\\n` +\n    `ğŸ’¨ Vento: ${weather.windSpeed.toFixed(1)} km/h\\n` +\n    `â˜ï¸ CondiÃ§Ãµes: ${weather.conditions}\\n\\n` +\n    `â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n` +\n    `âš ï¸ *Alerta baseado em dados meteorolÃ³gicos reais*\\n` +\n    `ğŸ“Š Fonte: OpenWeather API\\n` +\n    `â° ${new Date().toLocaleString('pt-BR', {timeZone: 'America/Sao_Paulo'})}\\n\\n`;\n\nif (risk.level === 'CRÃTICO') {\n    msg.payload = message + `ğŸš¨ *CONDIÃ‡Ã•ES EXTREMAS!*\\nâš ï¸ Risco muito alto de propagaÃ§Ã£o de incÃªndios!`;\n} else if (risk.level === 'ALTO') {\n    msg.payload = message + `âš ï¸ *CondiÃ§Ãµes climÃ¡ticas desfavorÃ¡veis!*\\nğŸ“ AtenÃ§Ã£o redobrada necessÃ¡ria`;\n}\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "x": 1010,
        "y": 520,
        "wires": [["whatsapp_api_output"]]
    },
    {
        "id": "whatsapp_api_output",
        "type": "node-red-contrib-whatsapp-cmb-send-message",
        "z": "api_only_tab",
        "name": "WhatsApp (API)",
        "credtype": "account",
        "account": "",
        "text": "payload",
        "phonenumbervalue": "",
        "apikeyvalue": "",
        "apikeyinputtypemessage": "msg",
        "phonenumberinputtypemessage": "msg",
        "inputtypemessage": "msg",
        "rejectssl": false,
        "x": 1240,
        "y": 520,
        "wires": [[]]
    },
    {
        "id": "debug_api",
        "type": "debug",
        "z": "api_only_tab",
        "name": "Debug: API Data",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "",
        "statusType": "auto",
        "x": 1000,
        "y": 380,
        "wires": []
    },
    {
        "id": "mqtt_broker_hivemq",
        "type": "mqtt-broker",
        "name": "HiveMQ Public (Wokwi)",
        "broker": "broker.hivemq.com",
        "port": "1883",
        "clientid": "nodered-fire-detection-multi-state",
        "autoConnect": true,
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "autoUnsubscribe": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthRetain": "false",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closeRetain": "false",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willRetain": "false",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "influxdb_cloud_config",
        "type": "influxdb",
        "hostname": "",
        "port": "",
        "protocol": "https",
        "database": "",
        "name": "InfluxDB Cloud",
        "usetls": true,
        "tls": "",
        "influxdbVersion": "2.0",
        "url": "https://us-east-1-1.aws.cloud2.influxdata.com",
        "timeout": "10000",
        "rejectUnauthorized": true
    }
]
